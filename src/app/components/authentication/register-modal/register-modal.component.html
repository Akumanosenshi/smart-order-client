<ion-header [translucent]="true" class="ion-no-border">
  <ion-toolbar id="pageHeader" mode="ios" color="primary">
    <ion-title>Créer un Compte</ion-title>
    <ion-buttons slot="end">
      <ion-button class="ion-no-padding" (click)="cancel()" fill="clear" size="large">
        <ion-icon slot="icon-only" name="close"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-grid>
    <ion-row>
      <ion-col size="12" size-md="6">
        <ion-input
          required
          [(ngModel)]="registerUser.firstname"
          fill="outline"
          label="Prénom"
          labelPlacement="stacked"
          type="text"
          placeholder="Votre prénom">
        </ion-input>
      </ion-col>

      <ion-col size="12" size-md="6">
        <ion-input
          required
          [(ngModel)]="registerUser.lastname"
          fill="outline"
          label="Nom"
          labelPlacement="stacked"
          type="text"
          placeholder="Votre nom">
        </ion-input>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col size="12">
        <ion-input
          required
          [(ngModel)]="registerUser.email"
          fill="outline"
          label="Adresse Email"
          labelPlacement="stacked"
          type="email"
          placeholder="Entrez votre adresse email">
        </ion-input>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col size="12">
        <ion-input
          required
          [(ngModel)]="registerUser.mdp"
          (ngModelChange)="updatePasswordStrength($event)"
          fill="outline"
          label="Mot de Passe"
          labelPlacement="stacked"
          type="password"
          placeholder="Entrez votre mot de passe">
        </ion-input>

        <!-- Critères de sécurité -->
        <ion-text color="medium" class="password-hints">
          <ul style="padding-left: 1rem; font-size: 0.85rem;">
            <li [style.color]="hasMinLength ? 'green' : 'red'">Au moins 8 caractères</li>
            <li [style.color]="hasUppercase ? 'green' : 'red'">Une majuscule</li>
            <li [style.color]="hasLowercase ? 'green' : 'red'">Une minuscule</li>
            <li [style.color]="hasNumber ? 'green' : 'red'">Un chiffre</li>
            <li [style.color]="hasSpecialChar ? 'green' : 'red'">Un caractère spécial</li>
          </ul>
        </ion-text>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col size="12">
        <ion-input
          required
          [(ngModel)]="confirmPassword"
          fill="outline"
          label="Confirmation du mot de passe"
          labelPlacement="stacked"
          type="password"
          placeholder="Répétez votre mot de passe">
        </ion-input>
      </ion-col>
    </ion-row>

    <!-- Message d'erreur -->
    <ion-row *ngIf="errorMessage">
      <ion-col>
        <ion-text color="danger">
          {{ errorMessage }}
        </ion-text>
      </ion-col>
    </ion-row>

    <ion-row class="ion-justify-content-center">
      <ion-col size="12">
        <ion-button expand="block" color="primary" (click)="register()">
          Inscription
        </ion-button>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
